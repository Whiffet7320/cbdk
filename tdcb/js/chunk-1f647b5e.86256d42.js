(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f647b5e"],{"0cb2":function(e,t,r){var a=r("7b0b"),l=Math.floor,s="".replace,o=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,i=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,c,u){var d=r+e.length,m=n.length,h=i;return void 0!==c&&(c=a(c),h=o),s.call(u,h,(function(a,s){var o;switch(s.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,r);case"'":return t.slice(d);case"<":o=c[s.slice(1,-1)];break;default:var i=+s;if(0===i)return a;if(i>m){var u=l(i/10);return 0===u?a:u<=m?void 0===n[u-1]?s.charAt(1):n[u-1]+s.charAt(1):a}o=n[i-1]}return void 0===o?"":o}))}},1148:function(e,t,r){"use strict";var a=r("a691"),l=r("1d80");e.exports=function(e){var t=String(l(this)),r="",s=a(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(r+=t);return r}},"1d84":function(e,t,r){},"38cf":function(e,t,r){var a=r("23e7"),l=r("1148");a({target:"String",proto:!0},{repeat:l})},"4df4":function(e,t,r){"use strict";var a=r("0366"),l=r("7b0b"),s=r("9bdd"),o=r("e95a"),i=r("50c4"),n=r("8418"),c=r("35a1");e.exports=function(e){var t,r,u,d,m,h,p=l(e),f="function"==typeof this?this:Array,b=arguments.length,g=b>1?arguments[1]:void 0,y=void 0!==g,j=c(p),v=0;if(y&&(g=a(g,b>2?arguments[2]:void 0,2)),void 0==j||f==Array&&o(j))for(t=i(p.length),r=new f(t);t>v;v++)h=y?g(p[v],v):p[v],n(r,v,h);else for(d=j.call(p),m=d.next,r=new f;!(u=m.call(d)).done;v++)h=y?s(d,g,[u.value,v],!0):u.value,n(r,v,h);return r.length=v,r}},5319:function(e,t,r){"use strict";var a=r("d784"),l=r("825a"),s=r("50c4"),o=r("a691"),i=r("1d80"),n=r("8aa5"),c=r("0cb2"),u=r("14c3"),d=Math.max,m=Math.min,h=function(e){return void 0===e?e:String(e)};a("replace",2,(function(e,t,r,a){var p=a.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,f=a.REPLACE_KEEPS_$0,b=p?"$":"$0";return[function(r,a){var l=i(this),s=void 0==r?void 0:r[e];return void 0!==s?s.call(r,l,a):t.call(String(l),r,a)},function(e,a){if(!p&&f||"string"===typeof a&&-1===a.indexOf(b)){var i=r(t,e,this,a);if(i.done)return i.value}var g=l(e),y=String(this),j="function"===typeof a;j||(a=String(a));var v=g.global;if(v){var x=g.unicode;g.lastIndex=0}var k=[];while(1){var z=u(g,y);if(null===z)break;if(k.push(z),!v)break;var w=String(z[0]);""===w&&(g.lastIndex=n(y,s(g.lastIndex),x))}for(var F="",L=0,q=0;q<k.length;q++){z=k[q];for(var O=String(z[0]),S=d(m(o(z.index),y.length),0),_=[],I=1;I<z.length;I++)_.push(h(z[I]));var M=z.groups;if(j){var D=[O].concat(_,S,y);void 0!==M&&D.push(M);var $=String(a.apply(void 0,D))}else $=c(O,y,S,_,M,a);S>=L&&(F+=y.slice(L,S)+$,L=S+O.length)}return F+y.slice(L)}]}))},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var a=r("1d80"),l=r("5899"),s="["+l+"]",o=RegExp("^"+s+s+"*"),i=RegExp(s+s+"*$"),n=function(e){return function(t){var r=String(a(t));return 1&e&&(r=r.replace(o,"")),2&e&&(r=r.replace(i,"")),r}};e.exports={start:n(1),end:n(2),trim:n(3)}},7156:function(e,t,r){var a=r("861d"),l=r("d2bb");e.exports=function(e,t,r){var s,o;return l&&"function"==typeof(s=t.constructor)&&s!==r&&a(o=s.prototype)&&o!==r.prototype&&l(e,o),e}},"7bac":function(e,t,r){"use strict";r("1d84")},9303:function(e,t,r){"use strict";r("b205")},"9bdd":function(e,t,r){var a=r("825a"),l=r("2a62");e.exports=function(e,t,r,s){try{return s?t(a(r)[0],r[1]):t(r)}catch(o){throw l(e),o}}},a434:function(e,t,r){"use strict";var a=r("23e7"),l=r("23cb"),s=r("a691"),o=r("50c4"),i=r("7b0b"),n=r("65f0"),c=r("8418"),u=r("1dde"),d=u("splice"),m=Math.max,h=Math.min,p=9007199254740991,f="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var r,a,u,d,b,g,y=i(this),j=o(y.length),v=l(e,j),x=arguments.length;if(0===x?r=a=0:1===x?(r=0,a=j-v):(r=x-2,a=h(m(s(t),0),j-v)),j+r-a>p)throw TypeError(f);for(u=n(y,a),d=0;d<a;d++)b=v+d,b in y&&c(u,d,y[b]);if(u.length=a,r<a){for(d=v;d<j-a;d++)b=d+a,g=d+r,b in y?y[g]=y[b]:delete y[g];for(d=j;d>j-a+r;d--)delete y[d-1]}else if(r>a)for(d=j-a;d>v;d--)b=d+a-1,g=d+r-1,b in y?y[g]=y[b]:delete y[g];for(d=0;d<r;d++)y[d+v]=arguments[d+2];return y.length=j-a+r,u}})},a630:function(e,t,r){var a=r("23e7"),l=r("4df4"),s=r("1c7e"),o=!s((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:o},{from:l})},a9e3:function(e,t,r){"use strict";var a=r("83ab"),l=r("da84"),s=r("94ca"),o=r("6eeb"),i=r("5135"),n=r("c6b6"),c=r("7156"),u=r("c04e"),d=r("d039"),m=r("7c73"),h=r("241c").f,p=r("06cf").f,f=r("9bf2").f,b=r("58a8").trim,g="Number",y=l[g],j=y.prototype,v=n(m(j))==g,x=function(e){var t,r,a,l,s,o,i,n,c=u(e,!1);if("string"==typeof c&&c.length>2)if(c=b(c),t=c.charCodeAt(0),43===t||45===t){if(r=c.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,l=49;break;case 79:case 111:a=8,l=55;break;default:return+c}for(s=c.slice(2),o=s.length,i=0;i<o;i++)if(n=s.charCodeAt(i),n<48||n>l)return NaN;return parseInt(s,a)}return+c};if(s(g,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var k,z=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof z&&(v?d((function(){j.valueOf.call(r)})):n(r)!=g)?c(new y(x(t)),r,z):x(t)},w=a?h(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),F=0;w.length>F;F++)i(y,k=w[F])&&!i(z,k)&&f(z,k,p(y,k));z.prototype=j,j.constructor=z,o(l,g,z)}},b205:function(e,t,r){},c271:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"newAdd"},[r("div",{staticClass:"top"},[r("el-page-header",{attrs:{content:e.pageTitle},on:{back:e.goBack}}),r("a-anchor",{staticClass:"leftNav",on:{click:e.handleClick}},[r("a-anchor-link",{attrs:{href:"#anchor-0",title:"1 地块基础信息"}}),r("a-anchor-link",{attrs:{href:"#anchor-1",title:"2 地块产权信息"}}),r("a-anchor-link",{attrs:{href:"#anchor-2",title:"3 添加各类规划用途"}}),r("a-anchor-link",{attrs:{href:"#anchor-3",title:"4 地块价值"}}),r("a-anchor-link",{attrs:{href:"#anchor-4",title:"5 做地情况"}})],1)],1),r("div",{staticClass:"container"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("div",{attrs:{id:"anchor-0"}},[r("el-divider",{attrs:{"content-position":"left"}},[e._v("1 地块基础信息")]),r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"储备机构名称：",prop:"cbjgmc"}},[r("el-input",{model:{value:e.ruleForm.cbjgmc,callback:function(t){e.$set(e.ruleForm,"cbjgmc",t)},expression:"ruleForm.cbjgmc"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"地块名称：",prop:"dkmc"}},[r("el-input",{model:{value:e.ruleForm.dkmc,callback:function(t){e.$set(e.ruleForm,"dkmc",t)},expression:"ruleForm.dkmc"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"界址点文件上传：",prop:"jzdsc"}},[r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.upLoadFile}},[e._v("文件上传")]),e.isDetail?r("el-button",{attrs:{plain:""},on:{click:e.detaliClick}},[e._v("详情")]):e._e(),r("input",{ref:"fileInputList",staticClass:"displayN",staticStyle:{display:"none"},attrs:{type:"file",name:"companyLogo",id:"file0",multiple:"multiple"},on:{change:function(t){return e.companyLogo(t)}}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"入库时间：",prop:"rksj"}},[r("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.rksj,callback:function(t){e.$set(e.ruleForm,"rksj",t)},expression:"ruleForm.rksj"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"所在行政区：",prop:"szxzq"}},[r("el-cascader",{attrs:{options:this.ruleForm.szxzqList},on:{change:this.changeCity},model:{value:e.ruleForm.szxzq,callback:function(t){e.$set(e.ruleForm,"szxzq",t)},expression:"ruleForm.szxzq"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"地块面积(㎡)：",prop:"dkmj"}},[r("el-input",{attrs:{disabled:""},model:{value:e.ruleForm.dkmj,callback:function(t){e.$set(e.ruleForm,"dkmj",t)},expression:"ruleForm.dkmj"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"在库面积：",prop:"zjmj"}},[r("el-input",{model:{value:e.ruleForm.zjmj,callback:function(t){e.$set(e.ruleForm,"zjmj",t)},expression:"ruleForm.zjmj"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"地块坐落：",prop:"dkzl"}},[r("el-input",{model:{value:e.ruleForm.dkzl,callback:function(t){e.$set(e.ruleForm,"dkzl",t)},expression:"ruleForm.dkzl"}})],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"非经营性用地类型：",prop:"fjyxydlx"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.fjyxydlx,callback:function(t){e.$set(e.ruleForm,"fjyxydlx",t)},expression:"ruleForm.fjyxydlx"}},e._l(e.ruleForm.fjyxydlxList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1)],1),r("div",{style:{height:"是"==e.ruleForm.sfjxbdcdj?"140px":"80px"},attrs:{id:"anchor-1"}},[r("el-divider",{attrs:{"content-position":"left"}},[e._v("2 地块产权信息")]),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"是否进行不动产登记：",prop:"sfjxbdcdj"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.ruleForm.sfjxbdcdj,callback:function(t){e.$set(e.ruleForm,"sfjxbdcdj",t)},expression:"ruleForm.sfjxbdcdj"}},[r("el-radio",{attrs:{label:"是",border:""}},[e._v("是")]),r("el-radio",{attrs:{label:"否",border:""}},[e._v("否")])],1)],1)],1),"是"==e.ruleForm.sfjxbdcdj?r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"不动产权人：",prop:"bdcqr"}},[r("el-input",{model:{value:e.ruleForm.bdcqr,callback:function(t){e.$set(e.ruleForm,"bdcqr",t)},expression:"ruleForm.bdcqr"}})],1)],1):e._e(),"是"==e.ruleForm.sfjxbdcdj?r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"不动产权证书号：",prop:"bdcqzsh"}},[r("el-input",{model:{value:e.ruleForm.bdcqzsh,callback:function(t){e.$set(e.ruleForm,"bdcqzsh",t)},expression:"ruleForm.bdcqzsh"}})],1)],1):e._e(),"是"==e.ruleForm.sfjxbdcdj?r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"证载面积：",prop:"zzmj"}},[r("el-input",{model:{value:e.ruleForm.zzmj,callback:function(t){e.$set(e.ruleForm,"zzmj",t)},expression:"ruleForm.zzmj"}})],1)],1):e._e()],1),r("div",{staticStyle:{height:"400px"},attrs:{id:"anchor-2"}},[r("el-divider",{attrs:{"content-position":"left"}},[e._v("3 添加各类规划用途")]),r("el-button",{staticClass:"tabBtn",attrs:{type:"primary"},on:{click:e.tabAdd}},[e._v("新增")]),r("el-table",{staticStyle:{width:"60%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{fixed:"",prop:"ghyt",label:"规划用途"}}),r("el-table-column",{attrs:{prop:"mj",label:"面积(㎡)"}}),r("el-table-column",{attrs:{prop:"rjl",label:"容积率"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.ghytEdit(t)}}},[e._v("修改")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.ghytDelete(t)}}},[e._v("删除")])]}}])})],1)],1),r("div",{staticStyle:{height:"80px"},attrs:{id:"anchor-3"}},[r("el-divider",{attrs:{"content-position":"left"}},[e._v("4 地块价值")]),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"地块价值(万元)：",prop:"dkjz"}},[r("el-input",{model:{value:e.ruleForm.dkjz,callback:function(t){e.$set(e.ruleForm,"dkjz",t)},expression:"ruleForm.dkjz"}})],1)],1)],1),r("div",{staticStyle:{height:"420px"},attrs:{id:"anchor-4"}},[r("el-divider",{attrs:{"content-position":"left"}},[e._v("5 做地情况")]),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"是否按照规划红线做地：",prop:"yjazghhxzd"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.ruleForm.yjazghhxzd,callback:function(t){e.$set(e.ruleForm,"yjazghhxzd",t)},expression:"ruleForm.yjazghhxzd"}},[r("el-radio",{attrs:{label:"是",border:""}},[e._v("是")]),r("el-radio",{attrs:{label:"否",border:""}},[e._v("否")])],1)],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"有无临时利用：",prop:"ylsly"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.ruleForm.ylsly,callback:function(t){e.$set(e.ruleForm,"ylsly",t)},expression:"ruleForm.ylsly"}},[r("el-radio",{attrs:{label:"是",border:""}},[e._v("是")]),r("el-radio",{attrs:{label:"否",border:""}},[e._v("否")])],1)],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"做地是否完成：",prop:"zdsfwc"}},[r("el-radio-group",{attrs:{size:"small"},on:{change:e.zdsfwcChange},model:{value:e.ruleForm.zdsfwc,callback:function(t){e.$set(e.ruleForm,"zdsfwc",t)},expression:"ruleForm.zdsfwc"}},[r("el-radio",{attrs:{label:"是",border:""}},[e._v("是")]),r("el-radio",{attrs:{label:"否",border:""}},[e._v("否")])],1)],1)],1),e.ruleForm.zdsfwc?r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"是否达到出让条件：",prop:"sfddcrtj"}},[r("el-radio-group",{attrs:{size:"small"},on:{change:e.sfddcrtjChange},model:{value:e.ruleForm.sfddcrtj,callback:function(t){e.$set(e.ruleForm,"sfddcrtj",t)},expression:"ruleForm.sfddcrtj"}},[r("el-radio",{attrs:{label:"是",border:""}},[e._v("是")]),r("el-radio",{attrs:{label:"否",border:""}},[e._v("否")])],1)],1)],1):e._e(),e.ruleForm.zdsfwc?r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"是否列入出让计划：",prop:"crjh"}},[r("el-radio-group",{attrs:{size:"small"},model:{value:e.ruleForm.crjh,callback:function(t){e.$set(e.ruleForm,"crjh",t)},expression:"ruleForm.crjh"}},[r("el-radio",{attrs:{label:"是",border:""}},[e._v("是")]),r("el-radio",{attrs:{label:"否",border:""}},[e._v("否")])],1)],1)],1):e._e(),"是"==e.ruleForm.crjh?r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"计划年份：",prop:"jhnf"}},[r("el-input",{model:{value:e.ruleForm.jhnf,callback:function(t){e.$set(e.ruleForm,"jhnf",t)},expression:"ruleForm.jhnf"}})],1)],1):e._e(),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"坐地未完成：",prop:"zdwwc"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.zdwwc,callback:function(t){e.$set(e.ruleForm,"zdwwc",t)},expression:"ruleForm.zdwwc"}},e._l(e.ruleForm.zdwwcList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:10}},[r("el-form-item",{attrs:{label:"不能出让原因：",prop:"bncrbmyy"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ruleForm.bncrbmyy,callback:function(t){e.$set(e.ruleForm,"bncrbmyy",t)},expression:"ruleForm.bncrbmyy"}},e._l(e.ruleForm.bncrbmyyList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),r("el-col",{attrs:{span:24}}),r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"备注 ：",prop:"bz"}},[r("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容",autosize:{minRows:3,maxRows:5}},model:{value:e.ruleForm.bz,callback:function(t){e.$set(e.ruleForm,"bz",t)},expression:"ruleForm.bz"}})],1)],1),r("el-col",{attrs:{span:24}},[r("el-form-item",[r("div",{staticClass:"btns"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("保存")])],1)])],1)],1)]),r("el-dialog",{attrs:{title:"是否更改以下数据",visible:e.SKUupLoaddialogVisible,width:"46%"},on:{"update:visible":function(t){e.SKUupLoaddialogVisible=t}}},[r("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[r("el-row",[r("el-col",{attrs:{span:24}},[r("el-checkbox",{attrs:{label:"地块名称："+e.ruleForm.dkmc+" -> "+e.upLoadObj.dkmc}})],1),r("el-col",{attrs:{span:24}},[r("el-checkbox",{attrs:{label:"地块编号："+e.ruleForm.dkbh+" -> "+e.upLoadObj.dkbh}})],1),r("el-col",{attrs:{span:24}},[r("el-checkbox",{attrs:{label:"在库面积："+e.ruleForm.zjmj+" -> "+e.upLoadObj.zjmj}})],1),r("el-col",{attrs:{span:24}},[r("el-checkbox",{attrs:{label:"规划用途："+e.ruleForm.ghyt+" -> "+e.upLoadObj.ghyt}})],1)],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.SKUupLoaddialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.isTrue}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"修改规划用途",visible:e.ghytdialogVisible,width:"46%"},on:{"update:visible":function(t){e.ghytdialogVisible=t}}},[r("el-form",{ref:"ghytform",attrs:{model:e.ghytform,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"规划用途：",prop:"ghyt"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.ghytform.ghyt,callback:function(t){e.$set(e.ghytform,"ghyt",t)},expression:"ghytform.ghyt"}},e._l(e.ghytform.ghytList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"面积(㎡)："}},[r("el-input",{model:{value:e.ghytform.mj,callback:function(t){e.$set(e.ghytform,"mj",t)},expression:"ghytform.mj"}})],1),r("el-form-item",{attrs:{label:"容积率："}},[r("el-input",{model:{value:e.ghytform.rjl,callback:function(t){e.$set(e.ghytform,"rjl",t)},expression:"ghytform.rjl"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.ghytonSubmit}},[e._v("保存")])],1)],1)],1),r("el-dialog",{attrs:{title:"地图模式",visible:this.mapDialogVisible,width:"50%","before-close":e.maphandleClose},on:{"update:visible":function(t){return e.$set(this,"mapDialogVisible",t)}}},[r("AMap")],1)],1)])},l=[];function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function o(e){if(Array.isArray(e))return s(e)}r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}r("fb6a"),r("b0c0");function n(e,t){if(e){if("string"===typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e){return o(e)||i(e)||n(e)||c()}var d=r("1da1"),m=r("5530"),h=(r("96cf"),r("159b"),r("1276"),r("ac1f"),r("a434"),r("25f0"),r("5319"),r("2f62")),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{ref:"rootmap",attrs:{id:"map"}}),e._m(0)])},f=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ol-popup",attrs:{id:"popup"}},[r("a",{staticClass:"ol-popup-closer",attrs:{href:"#",id:"popup-closer"}}),r("div",{attrs:{id:"popup-content"}})])}],b=(r("a9e3"),r("d81d"),r("38cf"),r("5bc0"),r("5eee")),g=r("a2c7"),y=r("a79f"),j={option:{view:{center:[120.8211403940166,27.8582649137488],zoom:16}},resolutions:[1.406250026231581,.7031250131157905,.3515625065578952,.1757812532789476,.0878906266394738,.0439453133197369,.02197265665986845,.010986328329934226,.005493164164967113,.0027465820824835565,.0013732910412417782,.0006866455206208891,.00034332276031044456,.00017166138015522228,8583069007761114e-20,4291534503880557e-20,21457672519402785e-21,10728836259701392e-21,5364418129850696e-21,2682209064925348e-21,1341104532462674e-21],layers:[{layerType:"GroupLayer",name:"ImageMap",caption:"影像地图",baseMap:!0,logo:"image/tiledImage.png",opacity:.5,subLayers:[{id:"WZImageMap",layerType:"TileXYZ",caption:"温州影像地图",origin:[-180,90],url:"http://10.36.161.208:16080/wzgt16/arcgis/rest/services/CGCS2000/yingxiang/MapServer/tile/{z}/{y}/{x}",visible:!0,opacity:1}]},{layerType:"GroupLayer",name:"CBDK",caption:"储备地块",thematicMap:!0,subLayers:[{id:"GCS_CBDK",layerType:"WMS",caption:"储备地块",url:"http://10.36.128.241:28090/iserver/services/map-cbdk/wmts100",params:{LAYERS:"cbdk_jbxx@cbdk",FORMAT:"image/png"},queryUrl:"http://10.36.128.241:28090/iserver/services/data-cbdk/wfs100/utf-8",visible:!0}]}]},v=r("78db"),x=r("480c"),k=r("91b1"),z=r("f2f0"),w=r("256f"),F=r("f5dd"),L=r("8f3a"),q=r("0710"),O=r("4cdf"),S=r("f403"),_=r("3e6b"),I=r("5831"),M=r("5bc3"),D=r("6c77"),$=r("83a6"),A=r("8682"),E=r("0af5"),C=r("ce2c"),T=r("7fc9"),N=r("38f3"),P=r("345d"),R=r("2c30"),G=r("c721"),V=function(e){function t(t){var r=t||{};e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,crossOrigin:r.crossOrigin,projection:r.projection,reprojectionErrorThreshold:r.reprojectionErrorThreshold,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction,tileUrlFunction:B,url:r.url,urls:r.urls,wrapX:void 0===r.wrapX||r.wrapX,transition:r.transition}),this.params_=r.params||{},this.tmpExtent_=Object(E["j"])(),this.setKey(this.getKeyForParams_())}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getKeyForParams_=function(){var e=0,t=[];for(var r in this.params_)t[e++]=r+"-"+this.params_[r];return t.join("/")},t.prototype.getParams=function(){return this.params_},t.prototype.getRequestUrl_=function(e,t,r,a,l,s){var o=this.urls;if(o){var i,n=l.getCode().split(":").pop();if(s["SIZE"]=t[0]+","+t[1],s["BBOX"]=r.join(","),s["BBOXSR"]=n,s["IMAGESR"]=n,s["DPI"]=Math.round(s["DPI"]?s["DPI"]*a:90*a),1==o.length)i=o[0];else{var c=Object(T["d"])(Object(R["e"])(e),o.length);i=o[c]}var u=i.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return Object(G["a"])(u,s)}},t.prototype.getTilePixelRatio=function(e){return e},t.prototype.updateParams=function(e){Object(N["a"])(this.params_,e),this.setKey(this.getKeyForParams_())},t}(k["a"]);function B(e,t,r){var a=this.getTileGrid();if(a||(a=this.getTileGridForProjection(r)),!(a.getResolutions().length<=e[0])){var l=a.getTileCoordExtent(e,this.tmpExtent_),s=Object(P["d"])(a.getTileSize(e[0]),this.tmpSize);1!=t&&(s=Object(P["c"])(s,t,this.tmpSize));var o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object(N["a"])(o,this.params_),this.getRequestUrl_(e,s,l,t,r,o)}}var U=V,J={computed:Object(m["a"])({},Object(h["b"])(["mapObj","getshape"])),data:function(){return{map:null,fields:[{field:"cbjgmc",alias:"储备机构名称"},{field:"dkmc",alias:"地块名称"},{field:"dkdzbh",alias:"地块电子编号"},{field:"nscdkbh",alias:"拟收储地块编号"},{field:"dkbh",alias:"地块编号"},{field:"rksj",alias:"入库时间"},{field:"szxzq",alias:"所在行政区"},{field:"szjd",alias:"所在街道"},{field:"dkzl",alias:"地块坐落"},{field:"dkmj",alias:"地块面积"},{field:"nscmj",alias:"拟收储地块面积"},{field:"zjmj",alias:"在库面积"},{field:"sfjxbdcdj",alias:"是否进行不动产登记"},{field:"bdcqr",alias:"不动产权人"},{field:"bdcqzsh",alias:"不动产权证书号"},{field:"zzmj",alias:"证载面积"},{field:"ghyt",alias:"规划用途"},{field:"zzydmj",alias:"住宅用地面积"},{field:"sfydmj",alias:"商服用地面积"},{field:"qtydmj",alias:"其他用地面积"},{field:"dswqk",alias:"地上物情况"},{field:"dswqksm",alias:"地上物情况说明"},{field:"qqkfqk",alias:"前期开发情况"},{field:"rksjhghfs",alias:"入库时计划管护方式"},{field:"rksjhlyfs",alias:"入库时计划利用方式"},{field:"qdfs",alias:"取得方式"},{field:"nfcr",alias:"能否出让"},{field:"bncrbmyy",alias:"不能出让标明原因"},{field:"crjh",alias:"出让计划"},{field:"fjyxydlx",alias:"非经营性用地类型"},{field:"zdwwc",alias:"做地未完成"},{field:"ylsly",alias:"有临时利用"},{field:"sydk",alias:"商业地块"},{field:"zzdkbncrdyy",alias:"住宅地块不能出让的原因"},{field:"zt",alias:"状态"},{field:"bz",alias:"备注"},{field:"cjsj",alias:"记录创建时间"},{field:"lmdj",alias:"楼面地价"},{field:"jzdj",alias:"基准地价"},{field:"czr",alias:"操作人"}],Ellipsoid:{name:"CGCS2000",semiMajorAxis:6378137,semiMinorAxis:6356752.314140356,flatRate:.00335281068118232},L0:120,vetorLayer:null,selfIntersectionLayer:null,repeatLayer:null,angleLayer:null,longAndNarrowLayer:null}},created:function(){return Object(d["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},mounted:function(){this.initMap(),this.loadData()},methods:{XY2BL:function(e,t,r){var a=t/180*Math.PI,l=r.y/180*Math.PI,s=r.x/180*Math.PI,o=0;r.y>0&&(o=Number(r.y/1e6),o<=10&&(o=0));var i=1e6*o+5e5,n=0,c=r.x-n,u=r.y-i,d=2*e.flatRate-e.flatRate*e.flatRate,m=(1-Math.sqrt(1-d))/(1+Math.sqrt(1-d)),h=d/(1-d),p=c,f=p/(e.semiMajorAxis*(1-d/4-3*d*d/64-5*d*d*d/256)),b=f+(3*m/2-27*m*m*m/32)*Math.sin(2*f)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*f)+151*m*m*m/96*Math.sin(6*f)+1097*m*m*m*m/512*Math.sin(8*f),g=h*Math.cos(b)*Math.cos(b),y=Math.tan(b)*Math.tan(b),j=e.semiMajorAxis/Math.sqrt(1-d*Math.sin(b)*Math.sin(b)),v=e.semiMajorAxis*(1-d)/Math.sqrt((1-d*Math.sin(b)*Math.sin(b))*(1-d*Math.sin(b)*Math.sin(b))*(1-d*Math.sin(b)*Math.sin(b))),x=u/j;return s=a+(x-(1+2*y+g)*x*x*x/6+(5-2*g+28*y-3*g*g+8*h+24*y*y)*x*x*x*x*x/120)/Math.cos(b),l=b-j*Math.tan(b)/v*(x*x/2-(5+3*y+10*g-4*g*g-9*h)*x*x*x*x/24+(61+90*y+298*g+45*y*y-256*h-3*g*g)*x*x*x*x*x*x/720),r.y=180*s/Math.PI,r.x=180*l/Math.PI,r},initMap:function(){var e=this;y["a"].defs("EPSG:4490","+proj=longlat +ellps=GRS80 +no_defs");var t=new F["a"]({code:"EPSG:4490",extent:[119,26,123,29],units:"degree",axisOrientation:"neu",metersPerUnit:6378137*Math.PI/180,global:!1,worldExtent:[-180,-90,180,90]});Object(w["a"])(t);var r=Object(m["a"])(Object(m["a"])({},j.option.view),{},{projection:t});this._overlay=new q["a"]({element:document.getElementById("popup"),autoPan:!0,autoPanAnimation:{duration:250}}),this.map=new b["a"]({controls:L["a"]({attribution:!1,zoom:!1,rotate:!1}).extend([]),view:new g["a"](r),target:"map",renderer:"canvas"}),this.map.addOverlay(this._overlay);var a=null;j.layers.forEach((function(t){if("TileArcGISRest"===t.subLayers[0].layerType)a=new x["a"]({id:t.subLayers[0].id,source:new U({url:t.subLayers[0].url,crossOrigin:"anonymous"}),visible:t.subLayers[0].visible,name:t.subLayers[0].caption,opacity:t.subLayers[0].opacity,groupCaption:t.subLayers[0].groupCaption,baseMap:t.subLayers[0].baseMap,thematicMap:t.subLayers[0].thematicMap}),void 0!==t.subLayers[0].opacity&&"number"===typeof t.subLayers[0].opacity&&a.setOpacity(t.subLayers[0].opacity),e.map.addLayer(a);else if("TileXYZ"==t.subLayers[0].layerType){var r=t.subLayers[0].origin,l=new v["a"]({tileSize:256,origin:r,resolutions:j.resolutions});a=new x["a"]({id:t.subLayers[0].id,source:new k["a"]({url:t.subLayers[0].url,crossOrigin:"anonymous",tileGrid:l}),visible:t.subLayers[0].visible,name:t.subLayers[0].caption,groupCaption:t.subLayers[0].groupCaption,baseMap:t.subLayers[0].baseMap,thematicMap:t.subLayers[0].thematicMap}),e.map.addLayer(a)}else"WMS"==t.subLayers[0].layerType&&(a=new x["a"]({id:t.subLayers[0].id,source:new z["a"]({url:t.subLayers[0].url,params:t.subLayers[0].params}),visible:t.subLayers[0].visible,name:t.subLayers[0].caption,opacity:t.subLayers[0].opacity,groupCaption:t.subLayers[0].groupCaption,baseMap:t.subLayers[0].baseMap,thematicMap:t.subLayers[0].thematicMap,layerType:"WMS",queryUrl:t.subLayers[0].queryUrl}),void 0!==t.subLayers[0].opacity&&"number"===typeof t.subLayers[0].opacity&&a.setOpacity(t.subLayers[0].opacity),e.map.addLayer(a))}))},loadData:function(){this.vetorLayer=new _["a"]({source:new I["a"]({features:[]})}),this.map.addLayer(this.vetorLayer),this.selfIntersectionLayer=new _["a"]({source:new I["a"]({features:[]})}),this.map.addLayer(this.selfIntersectionLayer),this.repeatLayer=new _["a"]({source:new I["a"]({features:[]})}),this.map.addLayer(this.repeatLayer),this.angleLayer=new _["a"]({source:new I["a"]({features:[]})}),this.map.addLayer(this.angleLayer),this.longAndNarrowLayer=new _["a"]({source:new I["a"]({features:[]})}),this.map.addLayer(this.longAndNarrowLayer);var e=new Array,t=null;console.log(this.getshape,this.mapObj),t=this.getshape?new M["a"](this.getshape):new M["a"](this.mapObj.showMultiPolyGon);var r=new O["a"]({geometry:t});r.setStyle(new D["c"]({fill:new $["a"]({color:"rgba(0,0,0,0)"}),stroke:new A["a"]({color:"rgb(0,0,255)",width:2})})),this.vetorLayer.getSource().addFeature(r),console.log(this.vetorLayer);var a=E["b"](r.getGeometry().getCoordinates()[0]),l=E["x"](a);if(this.map.getView().setCenter(l),this.mapObj){for(var s=0;s<this.mapObj.selfIntersectionPoints.length;s++){var o=[this.mapObj.selfIntersectionPoints[s].x,this.mapObj.selfIntersectionPoints[s].y];r=new O["a"]({geometry:new S["a"](o)}),r.setStyle(new D["c"]({image:new C["a"]({radius:6,fill:new $["a"]({color:"red"})})})),this.selfIntersectionLayer.getSource().addFeature(r)}for(var i=0;i<this.mapObj.repeat.length;i++){var n=[this.mapObj.repeat[i].x,this.mapObj.repeat[i].y];r=new O["a"]({geometry:new S["a"](n)}),r.setStyle(new D["c"]({image:new C["a"]({radius:6,fill:new $["a"]({color:"yellow"})})})),this.repeatLayer.getSource().addFeature(r)}for(var c=0;c<this.mapObj.angle.length;c++){var u=[this.mapObj.angle[c].x,this.mapObj.angle[c].y];r=new O["a"]({geometry:new S["a"](u)}),r.setStyle(new D["c"]({image:new C["a"]({radius:6,fill:new $["a"]({color:"black"})})})),this.angleLayer.getSource().addFeature(r)}for(var d=0;d<this.mapObj.longAndNarrow.length;d++){e=new Array;for(var m=0;m<this.mapObj.longAndNarrow[d].length;m++){for(var h=[],p=0;p<this.mapObj.longAndNarrow[d][m].length;p++){var f={x:this.mapObj.longAndNarrow[d][m][p].y,y:this.mapObj.longAndNarrow[d][m][p].x},b=this.XY2BL(this.Ellipsoid,this.L0,f),g=[b.y,b.x];h.push(g)}e[m]=h,console.log(e)}r=new O["a"]({geometry:new M["a"](e)}),r.setStyle(new D["c"]({fill:new $["a"]({color:"rgba(0,0,0,0)"}),stroke:new A["a"]({color:"rgb(0,255,0)",width:2})})),console.log(r),this.longAndNarrowLayer.getSource().addFeature(r)}}}},watch:{mapObj:function(e){this.$store.commit("mapObj",e),this.loadData()},getshape:function(e){this.$store.commit("getshape",e),this.loadData()}}},K=J,X=(r("7bac"),r("2877")),Y=Object(X["a"])(K,p,f,!1,null,"0a92f8aa",null),W=Y.exports,Z={components:{AMap:W},data:function(){return{mapDialogID:!0,shape:null,add_data:{},formData:new FormData,sydk:[],qqkfqkList:[],mapDialogVisible:!1,pageTitle:"",file:null,valid:!1,checkList:[],upLoadObj:{},ghytdialogVisible:!1,tableData:[],tableDataIndex:null,ghytAddorEdit:null,ghytform:{mj:0,rjl:0,ghyt:"",ghytList:[{value:"住宅用地",label:"住宅用地"},{value:"商服用地",label:"商服用地"},{value:"其他用地",label:"其他用地"}]},SKUupLoaddialogVisible:!1,header:"",fileList:[],isDetail:!1,ruleForm:{name:"",cbjgmc:"",dkdzbh:"",dkmc:"",dkbh:"",rksj:"",szxzqList:[],szxzq:"",szjdList:[{value:"yz",label:"永中街道"},{value:"pz",label:"蒲州街道"},{value:"hb",label:"海滨街道"},{value:"yx",label:"永兴街道"},{value:"ws",label:"五山街道"}],szjd:"",dkmj:0,zjmj:"",dkzl:"",sfjxbdcdj:"1-1",bdcqr:"",bdcqzsh:"",zzmj:"",qqkfqk:[],dswqk:"",dswqksm:"",rksjhghfs:"",rksjhlyfs:"",czr:"",jzdj:"",lmdj:"",qdfs:"",nfcr:"3-1",fjyxydlx:"",fjyxydlxList:[],zdsfwc:null,crjh:"",sfddcrtj:"",zdwwc:"",zdwwcList:[{value:"收储地块内部做地未完成",label:"收储地块内部做地未完成"},{value:"地块外部做地未完成",label:"地块外部做地未完成"},{value:"收储范围与红线范围不一致",label:"收储范围与红线范围不一致"}],ylsly:"",ylslyList:[{value:"是",label:"是"},{value:"否",label:"否"}],sydk:"",bncrbmyy:"",bncrbmyyList:[],zt:"5-1",bz:""},rules:{ylsly:[{required:!0,message:"请选择",trigger:"change"}],zdsfwc:[{required:!0,message:"请选择做地是否完成",trigger:"change"}],yjazghhxzd:[{required:!0,message:"请选择是否按照规划红线做地",trigger:"blur"}],dkjz:[{required:!0,message:"请输入地块价值",trigger:"blur"}],bdcqzsh:[{required:!0,message:"请输入不动产权证书号",trigger:"blur"}],zzmj:[{required:!0,message:"请输入证载面积",trigger:"blur"}],cbjgmc:[{required:!0,message:"请输入储备机构名称",trigger:"blur"}],dkmc:[{required:!0,message:"请输入地块名称",trigger:"blur"}],dkbh:[{required:!0,message:"请输入地块编号",trigger:"blur"}],rksj:[{required:!0,message:"请选择日期",trigger:"change"}],szxzq:[{required:!0,message:"请选择行政区",trigger:"change"}],dkmj:[{required:!0,message:"请输入地块面积",trigger:"blur"}],zjmj:[{required:!0,message:"请输入在库面积",trigger:"blur"}],sfjxbdcdj:[{required:!0,message:"请选择是否进行不动产登记",trigger:"change"}],ghyt:[{required:!0,message:"请选择规划用途",trigger:"change"}],zzydmj:[{required:!0,message:"请输入住宅面积",trigger:"blur"}],sfydmj:[{required:!0,message:"请输入商服面积",trigger:"blur"}],qtydmj:[{required:!0,message:"请输入其他面积",trigger:"blur"}],czr:[{required:!0,message:"请输入操作人",trigger:"blur"}],qdfs:[{required:!0,message:"请输入取得方式",trigger:"blur"}],nfcr:[{required:!0,message:"请选择能否出让",trigger:"change"}],zt:[{required:!0,message:"请选择状态",trigger:"change"}]}}},computed:Object(m["a"])({},Object(h["b"])(["selectJbxxByIdObj"])),created:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,a,l,s,o,i,n,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$api.getXzs();case 2:return r=t.sent,r.data.forEach((function(t){t.value=t.location,t.label=t.location,t.children=[],e.$api.getJdsByXzId(t.id).then((function(e){e.data.forEach((function(e){e.value=e.jie,e.label=e.jie,delete e.id,delete e.isCentralCity,delete e.jie,delete e.xzId,t.children.push(e)}))})),delete t.id,delete t.location})),e.ruleForm.szxzqList=u(r.data),t.next=7,e.$api.selectEnums();case 7:if(a=t.sent,a.data.forEach((function(t){"非经营性用地类型"==t.name&&(t.label=t.value,e.ruleForm.fjyxydlxList.push(t)),"商业地块"==t.name&&(t.label=t.value,e.sydk.push(t)),"不能出让原因"==t.name&&(t.label=t.value,e.ruleForm.bncrbmyyList.push(t))})),!e.selectJbxxByIdObj){t.next=25;break}return t.next=12,e.$api.getshape(e.selectJbxxByIdObj.id);case 12:for(l=t.sent,s=l.data,e.shape="MULTIPOLYGON(",o=0;o<s.length;o++){for(i=s[o],e.shape+="((",n=0;n<i.length;n++)e.shape+=i[n][0]+" "+i[n][1]+",";e.shape=e.shape.substr(0,e.shape.length-1),e.shape+=")),"}e.shape=e.shape.substr(0,e.shape.length-1),e.shape+=")",console.log(e.shape),e.isDetail=!0,e.tableData=e.selectJbxxByIdObj.cbdkDkghxxes,e.ruleForm=Object(m["a"])(Object(m["a"])({},e.ruleForm),e.selectJbxxByIdObj),e.pageTitle="修改页面",t.next=26;break;case 25:e.pageTitle="新增页面";case 26:console.log(e.ruleForm.qqkfqk),e.ruleForm.qqkfqk&&0!==e.ruleForm.qqkfqk.length?(e.ruleForm.qqkfqk=e.ruleForm.qqkfqk.split(";"),e.ruleForm.qqkfqk.splice(-1,1)):e.ruleForm.qqkfqk=[],console.log(e.ruleForm.qqkfqk),e.ruleForm.szxzq=[e.ruleForm.szxzq,e.ruleForm.szjd],e.ruleForm.rksj?(c=Date.parse(e.ruleForm.rksj),e.ruleForm.rksj=new Date(c)):e.ruleForm.rksj="";case 31:case"end":return t.stop()}}),t)})))()},methods:{ghytEdit:function(e){console.log(e.row,e.$index),this.tableDataIndex=e.$index,this.ghytdialogVisible=!0,this.ghytform.ghyt=e.row.ghyt,this.ghytform.mj=e.row.mj,this.ghytform.rjl=e.row.rjl,this.ghytAddorEdit=!0},tabAdd:function(){this.ghytdialogVisible=!0,this.ghytform.ghyt="",this.ghytform.mj="",this.ghytform.rjl="",this.ghytAddorEdit=!1},ghytonSubmit:function(){if(this.ghytAddorEdit)this.tableData[this.tableDataIndex].ghyt=this.ghytform.ghyt,this.tableData[this.tableDataIndex].mj=+this.ghytform.mj,this.tableData[this.tableDataIndex].rjl=+this.ghytform.rjl;else{var e=Object(m["a"])({},this.ghytform);delete e.ghytList,e.mj=+e.mj,e.rjl=+e.rjl,e.cbjgmc=this.ruleForm.cbjgmc,e.crjh=null,e.jbxxId=this.ruleForm.id,e.nfcr=null,e.szjd=this.ruleForm.szjd,"string"!=typeof this.ruleForm.szxzq?e.szxzq=this.ruleForm.szxzq[0]:e.szxzq=this.ruleForm.szxzq,this.tableData.push(e)}console.log(this.tableData),this.ghytdialogVisible=!1},ghytDelete:function(e){console.log(e.$index),this.tableData.splice(e.$index,1)},sfddcrtjChange:function(e){"否"==e&&(this.ruleForm.crjh="否")},zdsfwcChange:function(e){"否"==e&&(this.ruleForm.sfddcrtj="否",this.ruleForm.crjh="否")},formatDate:function(e){var t=e.getFullYear(),r=e.getMonth()+1,a=e.getDate();return r<10&&(r="0".concat(r)),a<10&&(a="0".concat(a)),t+"-"+r+"-"+a},changeCity:function(e){console.log(e)},submitForm:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,l,s,o,i,n,c,u,d,h,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return console.log(t.ruleForm.sfjxbdcdj),r.next=3,t.$refs[e].validate((function(e){e&&(t.valid=!0,console.log("submit!"))}));case 3:if(!t.valid){r.next=78;break}if(t.valid=!1,t.ruleForm.rksj&&(t.ruleForm.rksj=t.formatDate(t.ruleForm.rksj)),a=t.ruleForm.szxzq,t.ruleForm.szxzq=a[0],t.ruleForm.szjd=a[1],t.ruleForm.qqkfqk=t.ruleForm.qqkfqk.toString(),""!=t.ruleForm.qqkfqk&&(t.ruleForm.qqkfqk=t.ruleForm.qqkfqk.replace(/,/g,";")+";"),l=null,t.selectJbxxByIdObj){r.next=48;break}return s=Object(m["a"])({},t.ruleForm),s.cbdkDkghxxes=t.tableData,s.cbdkDkghxxes[0].index=s.cbdkDkghxxes[0].ghyt,s.cbdkDkghxxes.yjazghhxzd=t.ruleForm.yjazghhxzd,s.cbdkDkghxxes.ylsly=t.ruleForm.ylsly,s.cbdkDkghxxes.zdsfwc=t.ruleForm.zdsfwc,o=0,i=0,n=0,s.cbdkDkghxxes.forEach((function(e){e.yjazghhxzd=t.ruleForm.yjazghhxzd,e.ylsly=t.ruleForm.ylsly,e.zdsfwc=t.ruleForm.zdsfwc,"住宅用地"==e.ghyt?o+=e.mj:"商服用地"==e.ghyt?i+=e.mj:"其他用地"==e.ghyt&&(n+=e.mj)})),s.sfydmj=i,s.zzydmj=o,s.qtydmj=n,s.czr="user1",s.zt="在库",s.cjsj=null,s.cbdkDkghxxes.length>0?s.ghyt=s.cbdkDkghxxes[0].ghyt:s.ghyt="",s.jzdj&&(s.jzdj=s.jzdj.toString()),delete s.name,delete s.fjyxydlxList,delete s.szjdList,delete s.szxzqList,delete s.ylslyList,delete s.zdwwc,delete s.zdwwcList,delete s.bncrbmyyList,console.log(s),r.next=40,t.$api.saveJbxx(s);case 40:return l=r.sent,console.log(l),r.next=44,t.$api.saveYstx({cbdkId:l.data.id,shape:l.data.shape});case 44:c=r.sent,console.log(c),r.next=75;break;case 48:return u=Object(m["a"])({},t.ruleForm),u.cbdkDkghxxes=t.tableData,u.cbdkDkghxxes[0].index=u.cbdkDkghxxes[0].ghyt,d=0,h=0,p=0,u.cbdkDkghxxes.forEach((function(e){e.yjazghhxzd=t.ruleForm.yjazghhxzd,e.ylsly=t.ruleForm.ylsly,e.zdsfwc=t.ruleForm.zdsfwc,"住宅用地"==e.ghyt?d+=e.mj:"商服用地"==e.ghyt?h+=e.mj:"其他用地"==e.ghyt&&(p+=e.mj)})),u.sfydmj=h,u.zzydmj=d,u.qtydmj=p,u.cbdkDkghxxes.length>0?u.ghyt=u.cbdkDkghxxes[0].ghyt:u.ghyt="",u.czr="user1",u.zt="在库",u.cjsj=null,u.jzdj&&(u.jzdj=u.jzdj.toString()),u.shape=t.shape,delete u.name,delete u.fjyxydlxList,delete u.szjdList,delete u.szxzqList,delete u.ylslyList,delete u.zdwwc,delete u.zdwwcList,delete u.bncrbmyyList,console.log(u),r.next=73,t.$api.updateJbxx(u);case 73:l=r.sent,console.log(l);case 75:"200"==l.code?(t.$message({message:l.msg,type:"success"}),setTimeout((function(){t.$router.push({name:"Administration"})}),1e3)):t.$message.error(l.msg),r.next=80;break;case 78:return console.log("error submit!!"),r.abrupt("return",!1);case 80:case"end":return r.stop()}}),r)})))()},resetForm:function(e){this.$refs[e].resetFields()},goBack:function(){this.$router.push({name:"Administration"})},handleClick:function(e,t){e.preventDefault(),console.log(t.href),this.$el.querySelector(t.href).scrollIntoView()},detaliClick:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.selectJbxxByIdObj&&e.selectJbxxByIdObj.id&&e.mapDialogID)){t.next=6;break}return t.next=3,e.$api.getshape(e.selectJbxxByIdObj.id);case 3:r=t.sent,console.log(r.data),e.$store.commit("getshape",r.data);case 6:e.mapDialogVisible=!0;case 7:case"end":return t.stop()}}),t)})))()},upLoadFile:function(){this.$refs.fileInputList.click()},companyLogo:function(e){var t=this;return Object(d["a"])(regeneratorRuntime.mark((function r(){var a,l,s,o,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.formData||(t.formData=new FormData),console.log(e.target.files[0]),t.file=e.target.files[0],t.formData.append("file",t.file),console.log(t.formData.getAll("file")),console.log(t.formData),r.next=8,t.$api.upload(t.formData);case 8:if(a=r.sent,console.log(a),200==a.code){for(t.formData.delete("file"),t.formData=null,t.$refs.fileInputList.value="",t.isDetail=!0,console.log(a.data),t.$store.commit("mapObj",a.data),t.$store.commit("getshape",null),t.mapDialogID=!1,t.mapDialogVisible=!0,l={ghyt:a.data.dkyt,dkbh:a.data.qkbh,zjmj:a.data.tdmj,dkmc:a.data.zcdkmc},t.upLoadObj=l,t.SKUupLoaddialogVisible=!0,s="MULTIPOLYGON(",o=0;o<a.data.showMultiPolyGon.length;o++){for(i=a.data.showMultiPolyGon[o],s+="((",n=0;n<i.length;n++)s+=i[n][0]+" "+i[n][1]+",";s=s.substr(0,s.length-1),s+=")),"}s=s.substr(0,s.length-1),s+=")",t.shape=s,t.ruleForm.shape=s}else t.$message.error("地块文件格式错误");case 11:case"end":return r.stop()}}),r)})))()},isTrue:function(){var e=this;console.log(this.checkList),this.checkList.forEach((function(t){t.indexOf("地块名称")&&(e.ruleForm.dkmc=e.upLoadObj.dkmc),t.indexOf("地块编号")&&(e.ruleForm.dkbh=e.upLoadObj.dkbh),t.indexOf("在库面积")&&(e.ruleForm.zjmj=e.upLoadObj.zjmj),t.indexOf("规划用途")&&(e.ruleForm.ghyt=e.upLoadObj.ghyt),e.SKUupLoaddialogVisible=!1}))},maphandleClose:function(){this.mapDialogVisible=!1}},watch:{tableData:function(e){var t=this;this.ruleForm.dkmj=0,e.forEach((function(e){t.ruleForm.dkmj+=e.mj}))}}},H=Z,Q=(r("9303"),Object(X["a"])(H,a,l,!1,null,"3041404e",null));t["default"]=Q.exports},d28b:function(e,t,r){var a=r("746f");a("iterator")},e01a:function(e,t,r){"use strict";var a=r("23e7"),l=r("83ab"),s=r("da84"),o=r("5135"),i=r("861d"),n=r("9bf2").f,c=r("e893"),u=s.Symbol;if(l&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof m?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};c(m,u);var h=m.prototype=u.prototype;h.constructor=m;var p=h.toString,f="Symbol(test)"==String(u("test")),b=/^Symbol\((.*)\)[^)]+$/;n(h,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=p.call(e);if(o(d,e))return"";var r=f?t.slice(7,-1):t.replace(b,"$1");return""===r?void 0:r}}),a({global:!0,forced:!0},{Symbol:m})}}}]);
//# sourceMappingURL=chunk-1f647b5e.86256d42.js.map